library(rvest)
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")
if (current_state != html){
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "covid19.csv")
save(html, file="current_state.html")
}else{
read.csv("covid19.csv")
}
if (file.exists("current_state.html")){
current_state <- load("current_state.html")
}else{
current_state <- ""
}
if (current_state != html){
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "covid19.csv")
save(html, file="current_state.html")
}else{
read.csv("covid19.csv")
}
current_state <- html
current_state <- html
if (file.exists("current_state.html")){
current_state <- load("current_state.html")
}else{
current_state <- ""
}
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")
if (current_state != html){
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "covid19.csv")
save(html, file="current_state.html")
current_state <- html
}else{
read.csv("covid19.csv")
}
if (file.exists("current_state.html")){
current_state <- paste(readLines("current_state.html"), collapse="\n")
}else{
current_state <- ""
}
if (file.exists("current_state.html")){
current_state <- paste(readLines("current_state.html"), collapse="\n")
}else{
current_state <- ""
}
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")
if (current_state != html){
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "covid19.csv")
save_html(html, file="current_state.html")
current_state <- html
}else{
covid19 <- read.csv("covid19.csv")
}
View(html)
View(html)
print(html_children())
print(html)
print(html.body)
print(html.html_node("body"))
print(html%>%html_node("body"))
print(html%>%html_node(".restBody"))
print(html%>%html_node(".restBody").content)
print(html%>%html_node(".restBody"))
print(html%>%html_node(".restBody")%>%html_text)
current_state <- html%>%html_node(".restBody")%>%html_text
if (file.exists("current_state.html")){
current_state <- readChar("current_state.txt", file.info("current_state.txt")$size)
}else{
current_state <- ""
}
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")
if (current_state != html){
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "covid19.csv")
current_state <- html%>%html_node(".restBody")%>%html_text
save(current_state, file="current_state.txt")
}else{
covid19 <- read.csv("covid19.csv")
}
if (file.exists("current_state.html")){
current_state <- readChar("current_state.txt", file.info("current_state.txt")$size)
}else{
current_state <- ""
}
if (file.exists("current_state.txt")){
current_state <- readChar("current_state.txt", file.info("current_state.txt")$size)
}else{
current_state <- ""
}
if (file.exists("current_state.txt")){
current_state <- readChar("current_state.txt", file.info("current_state.txt")$size)
}else{
current_state <- ""
}
if (file.exists("current_state.txt")){
current_state <- <- read_file("current_state.txt")
}else{
current_state <- ""
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
}else{
current_state <- ""
}
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")
if (current_state != html){
#covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
#write.csv(covid19, file = "covid19.csv")
current_state <- html%>%html_node(".restBody")%>%html_text
write(current_state, file="current_state.txt")
}else{
covid19 <- read.csv("covid19.csv")
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
}else{
current_state <- ""
}
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")
print("loading")
if (current_state != html){
#covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
#write.csv(covid19, file = "covid19.csv")
current_state <- html%>%html_node(".restBody")%>%html_text
write(current_state, file="current_state.txt")
}else{
print("loading")
covid19 <- read.csv("covid19.csv")
}
print(current_state != html)
View(html)
View(html)
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
print(current_state != html)
if (current_state != html){
#covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
#write.csv(covid19, file = "covid19.csv")
current_state <- html%>%html_node(".restBody")%>%html_text
write(current_state, file="current_state.txt")
}else{
print("loading")
covid19 <- read.csv("covid19.csv")
}
if (current_state != html){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "covid19.csv")
current_state <- html%>%html_node(".restBody")%>%html_text
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("covid19.csv")
}
if (current_state != html){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- html%>%html_node(".restBody")%>%html_text
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
( install.packages("roxygen2") )
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
}else{
current_state <- ""
}
library(tidyverse)
library(rvest)
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
}else{
current_state <- ""
}
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
if (current_state != html){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- html%>%html_node(".restBody")%>%html_text
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
}else{
current_state <- ""
}
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
if (current_state != html){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- html%>%html_node(".restBody")%>%html_text
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
}else{
current_state <- ""
}
if
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
library(tidyverse)
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
if (current_state != html){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- html
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
}else{
current_state <- ""
}
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
if (current_state != html){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- html
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
print(current_state == html)
print(current_state)
print(html)
if (current_state != html+"\n"){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- html
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text"\n"
html <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text+"\n"
html <- html+"\n"
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
website <- "\n"
library(tidyverse)
website <- website+"\n"
website <- website.concat("\n")
website <- paste(website,"\n"))
website
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
website <- paste(website,"\n")
if (current_state != html+"\n"){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- html
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
if (current_state != html){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- html
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
print(website)
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
website <- paste(website,"\n",sep="")
print(website)
if (current_state != html){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- html
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
print(website == current_state)
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
}else{
current_state <- ""
}
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
website <- paste(website,"\n",sep="")
if (current_state != website){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- website
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
}else{
current_state <- ""
}
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
website <- paste(website,"\n",sep="")
if (current_state != website){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- website
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
}else{
current_state <- ""
}
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
website <- paste(website,"\n",sep="")
if (current_state != website){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- website
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
current_state <- substr(current_state,1,nchar(current_state)-2)
}else{
current_state <- ""
}
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
website <- paste(website,"\n",sep="")
if (current_state != website){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- website
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
if (current_state != website){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- website
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
current_state <- substr(current_state,1,nchar(current_state)-2)
}else{
current_state <- ""
}
print(current_state)
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
if (current_state != website){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- website
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
#apparently saving and loading the file adds an extra line break:
current_state <- substr(current_state,1,nchar(current_state)-2)
}else{
current_state <- ""
}
print(current_state)
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
if (current_state != website){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- website
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
#apparently saving and loading the file adds an extra line break:
current_state <- substr(current_state,1,nchar(current_state)-2)
}else{
current_state <- ""
}
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
if (current_state != website){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- website
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
print(current_state)
print(website)
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
#apparently saving and loading the file adds an extra line break:
#current_state <- substr(current_state,1,nchar(current_state)-2)
}else{
current_state <- ""
}
print(current_state)
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
#apparently saving and loading the file adds an extra line break:
current_state <- substr(current_state,1,nchar(current_state)-2)
}else{
current_state <- ""
}
print(current_state)
print(website)
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
#apparently saving and loading the file adds an extra line break:
current_state <- substr(current_state,1,nchar(current_state)-1)
}else{
current_state <- ""
}
print(current_state)
print(website)
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
if (current_state != website){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- website
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
#apparently saving and loading the file adds an extra line break:
current_state <- substr(current_state,1,nchar(current_state)-1)
}else{
current_state <- ""
}
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
if (current_state != website){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- website
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
if (file.exists("current_state.txt")){
current_state <- read_file("current_state.txt")
#apparently saving and loading the file adds an extra line break:
current_state <- substr(current_state,1,nchar(current_state)-1)
}else{
current_state <- ""
}
website <- read_html("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_COVID19/FeatureServer/0")%>%html_node(".restBody")%>%html_text
if (current_state != website){
print("data set has changed and will be reloaded")
covid19 <- read.csv("https://www.arcgis.com/sharing/rest/content/items/f10774f1c63e40168479a1feb6c7ca74/data")
write.csv(covid19, file = "RKI_COVID19.csv")
current_state <- website
write(current_state, file="current_state.txt")
}else{
print("loading local dataset")
covid19 <- read.csv("RKI_COVID19.csv")
}
